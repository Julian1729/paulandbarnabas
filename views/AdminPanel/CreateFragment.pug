extends AdminBase.pug

prepend GLOBAL_PUG
  - var page_name = "ap-createfragment"

append scripts
  script(src=constants.base_url + "/assets/js/dist/ap-createfragment.bundle.js", type="text/javascript")

append templates
  script(type="x-tmpl-mustache", id="temp-block-group")
    .block-group
      p.street {{street}}
      .blocks
  
  script(type="x-tmpl-mustache", id="temp-block-row")
    .block
      p.details #[span(class="hundred") {{hundred}}] #[span(class="even") {{odd_even}}]

append modals
  +modal('fragment-saved-modal')
    p Fragment successfully created
    .button-row.mini
      button(data-action="close") okay

block panel
  //- Fragment Details Pane
  .pane.fragment-details
    +section_header('fragment details')
    form#fragment-form
      .fields
        +text_input('fragment number')(name="fragment.number", type="number" class="dark fragment-number")
      .fields
        h6 assign to
        +select_input()(name="fragment.assignment")
          option(value="") leave unassigned
          option(value="", disabled)
          
      +section_header('select territory')
      small select a street to begin assigning blocks to this fragment
      .fields
        h6 street
        +select_input()(name="current_street_selection")
      .fields
        h6 blocks
        table.select-blocks#block-table
          tr
            th Hundred
            th Odd/Even
            th Units
    
      button(id="save-fragment") save fragment
        
  
  //- Fragment Graphic
  .pane
    .fragment-display-wrapper
      .inner
        .header
          p.fragment-number Fragment ##[span(id="fragment-number") --- ]
          p.fragment-stats #[span(id="fragment-block-count") 0] Blocks / #[span(id="fragment-unit-count") 0] Units
        .container
          p.empty-message Please select a street to begin assigning blocks to this fragment
  
